{
    "$schema": "http://json-schema.org/draft-07/schema",
    "$id": "http://datapm.io/docs/package-file-schema-v1.json",
    "type": "object",
    "title": "DataPM Package File",
    "description": "The root definition file for version 1 of the datapm package file system.",
    "default": {},
    "required": [
        "updatedDate",
        "displayName",
        "packageSlug",
        "version",
        "description",
        "schemas"
    ],
    "properties": {
        "generatedBy": {
            "$id": "#/generatedBy",
            "type": "string",
            "title": "Generated By",
            "description": "The name of the person or system that generated the pacakge file.",
            "default": ""
        },
        "updatedDate": {
            "$id": "#/updatedDate",
            "type": "string",
            "format": "date-time",
            "title": "Schema Updated Date",
            "description": "The last updated date of the package file - not the data!",
            "default": ""
        },
        "displayName": {
            "$id": "#/displayName",
            "type": "string",
            "title": "User Friendly Name",
            "description": "The name shown in UI's for user ease of understanding.",
            "default": ""
        },
        "packageSlug": {
            "$id": "#/packageSlug",
            "type": "string",
            "title": "Short Name",
            "description": "The name used to reference this package for API and developer purposes. This field is restricted to characters A-z,0-9,_,-,@",
            "default": ""
        },
        "version": {
            "$id": "#/version",
            "type": "string",
            "title": "Version",
            "description": "In the semantic versioning format of major.minor.patch",
            "default": "1.0.0",
            "pattern": "^[0-9]+\\.[0-9]+\\.[0-9]+$"
        },
        "description": {
            "$id": "#/description",
            "type": "string",
            "title": "Package Description",
            "description": "A long form description of the package contents.",
            "default": ""
        },
        "schemas": {

            "$id": "#/schemas",
            "type": "array",
            "title": "Schemas",
            "description": "A set of schemas of the data that are avialable in the package. These data types may be aquired indpenedntly, or all together - usually through multiple connections.",
            "default": [],
            "items": {
                "allOf": [
                    { "$ref": "http://json-schema.org/draft-07/schema" },
                    {   
                        "type": "object",
                        "title": "Schema",
                        "description": "A schema of data available in the package. ",
                        "additionalItems": true,
                        "properties": {
                            "properties": {
                                "allOf": [
                                    { "$ref": "http://json-schema.org/draft-07/schema" },
                                    {
                                        "required": ["type"]
                                    }
                                ]
                            },
                            "parser": {
                                "$id": "#/schemas/parser",
                                "type": "object",
                                "title": "Parser",
                                "description": "A description of the parser needed for the stream.",
                                "default": {},
                                "required": [
                                    "mimeType"
                                ],
                                "properties": {
                                    "mimeType": {
                                        "$id": "#/schemas/parser/mimeType",
                                        "type": "string",
                                        "title": "Parser Mime Type",
                                        "description": "The mime type of the file, which identifies the parser needed.",
                                        "default": ""
                                    },
                                    "configuration": {
                                        "$id": "#/schemas/parser/configuration",
                                        "type": "object",
                                        "tile": "Parser Configuration",
                                        "description": "The parser configuration. The properties of which is specific to the parser",
                                        "properties": {
        
                                        },
                                        "additionalProperties": true
                                    }
                                },
                                "additionalProperties": true
                            },
                            "recordCount": {
                                "$id": "#/schemas/statistics/recordCount",
                                "type": "integer",
                                "title": "Record Count",
                                "description": "The exact or estamated number of records in the data set.",
                                "default": 0
                            },
                            "recordCountApproximate": {
                                "$id": "#/schemas/statistics/recordCountApproximate",
                                "type": "boolean",
                                "title": "Record Count Approximate",
                                "description": "Whether a record count is exact or approximate",
                                "default": false
                            },
                            "byteCount": {
                                "$id": "#/schemas/statistics/byteCount",
                                "type": "integer",
                                "title": "Byte Count",
                                "description": "The exact or approximate number of bytes in the raw dataset. This should include only the 'values' and not the format, schema, or keys",
                                "default": 0
                            },
                            "byteCountApproximate": {
                                "$id": "#/schemas/statistics/byteCountApproximate",
                                "type": "boolean",
                                "title": "Byte Count Approximate",
                                "description": "Whether the provided byte count is approximate or exact.",
                                "default": false
                            },
                            "transfer": {
                                "$id": "#/schemas/transfer",
                                "type": "object",
                                "title": "Data Transfer",
                                "description": "A description of how the data is transfered",
                                "default": {},
                                "required": [
                                    "protocol"
                                ],
                                "properties": {
                                    "protocol": {
                                        "$id": "#/schemas/transfer/protocol",
                                        "type": "string",
                                        "title": "Transfer Protocol",
                                        "description": "The protocol that is used to transfer the data. This defines the transport method.",
                                        "default": ""
                                    },
                                    "configuration": {
                                        "$id": "#/schemas/transfer/configuration",
                                        "type": "object",
                                        "title": "Transfer Configuration",
                                        "description": "The configuration used by the transport implementation to aquire the data stream.",
                                        "default": {},
                                        "required": [
                                        ],
                                        "properties": {
        
                                        },
                                        "additionalProperties": true
                                    }
                                },
                                "additionalProperties": true
                            }
                        }
                    }
                ]
            }
        }
    },
    "additionalProperties": true
}